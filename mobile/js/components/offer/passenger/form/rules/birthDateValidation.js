var __bind=function(e,t){return function(){return e.apply(t,arguments)}};define(["underscore","moment","meld","core/util/dictionary/getDictionaryData"],function(e,t,n,r){var i,s;return s=function(e){var t;return t=Math.abs(e.diff(this.getFlightMoment(),"years")),t>=0&&t<2?!0:!1},i=function(){function i(){this.categoryRule=__bind(this.categoryRule,this)}return i.prototype.passengerCategoryApproved=function(e){var t;return t={name:"birthDate",value:e},t},i.prototype.infantRule=s,i.prototype.removers=[],i.prototype.onReady=function(){return this.removers.push(n.around(this,"getFlightMoment",this.isLufthansaExeption)),e.each(this.categoryRules,function(e){return function(t,r){return e.removers.push(n.after(e.categoryRules,r,function(t){if(t===!0)return e.passengerCategoryApproved(r)}))}}(this))},i.prototype.onDestroy=function(){var e,t,n,r,i;r=this.removers,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e.remove());return i},i.prototype.categoryRules={ADULT:function(e){var t;return t=Math.abs(e.diff(this.getFlightMoment(),"years")),t>=12?!0:!1},CHILD:function(e){var t;return t=Math.abs(e.diff(this.getFlightMoment(),"years")),t>=2&&t<12?!0:!1},INFANT_WITH_SEAT:s,INFANT:s},i.prototype.categoryRule=function(e){return this.categoryRules[this.passengerCategory].call(this,t(e))},i.prototype.isLufthansaExeption=function(t){var n,i;return n=e.reduce(this.response.flight.segments,function(t){return function(n,i){var s;return n===!1?n:(s=e.reduce(i.legs,function(e,n){var i;return e===!1?e:(i=r(n.marketingCompany.id,n.marketingCompany.type,t.response.dictionary),i.codeIATA==="LH"?!0:!1)},!0),n&&s)}}(this),!0),n?i="last":i="first",t.proceed(i)},i.prototype.getFlightMoment=function(t){var n;return n=this.response.flight.segments[0],e[t](n.legs).start.dateTime},i}(),i});
