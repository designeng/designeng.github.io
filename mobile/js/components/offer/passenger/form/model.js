define(["underscore","moment","meld","core/util/dictionary/getDictionaryData"],function(e,t,n,r){var i,s,o,u;return u=function(){},s=t(),o=function(e){return e.format("YYYY-MM-DD")},i=function(){function i(r,i,s){var u,a,f,l,c,h,p,d;this.response=s,d=[],d.push(n.around(this,"getFlightDateTime",this.isLufthansaExeption)),l=t(this.getFlightDateTime()),h=this.getMin(),c=this.getMax(),i==="ADULT"&&(u=l.clone(),c=u.subtract(12,"years")),i==="CHILD"&&(f=l.clone(),a=l.clone(),c=f.subtract(2,"years"),h=a.subtract(12,"years"));if(i==="INFANT"||i==="INFANT_WITH_SEAT")u=l.clone(),h=u.subtract(2,"years");return h=o(h),c=o(c),p=e.extend(r,{inputDateMin:h,inputDateMax:c,onDestroy:function(){var e,t,n,r;r=[];for(t=0,n=d.length;t<n;t++)e=d[t],r.push(e.remove());return r}}),p}return i.prototype.getMin=function(){return s.clone().subtract(115,"years")},i.prototype.getMax=function(){return s},i.prototype.isLufthansaExeption=function(t){var n,i;return n=e.reduce(this.response.flight.segments,function(t){return function(n,i){var s;return s=e.reduce(i.legs,function(e,n){var i;return i=r(n.marketingCompany.id,n.marketingCompany.type,t.response.dictionary),i.codeIATA==="LH"?!0:!1},!0),n&&s}}(this),!0),n?i="last":i="first",t.proceed(i)},i.prototype.getFlightDateTime=function(t){return e[t](e[t](this.response.flight.segments).legs).start.dateTime},i}()});
