define(["underscore","underscore.string","meld","wire/lib/object"],function(e,t,n,r){return function(i){var s,o,u,a;return a=[],u=function(e){return e&&r.hasOwn(e,"$ref")},o=function(r,i,s){return e.each(i.options,function(o,f){var l,c;return u(o)?(c=o.$ref.split(".").slice(0,2),l={"class":c[0],method:c[1]},s({$ref:l["class"]}).then(function(r){var s;s="set"+t.capitalize(l.method);if(!e.isFunction(r[s]))throw new Error("Method "+s+" should be defined in object "+l["class"]+" !");return a.push(n.after(r,s,function(e){return i.target[f]=e}))})):r.reject("Provide wire reference ($ref) as value for key '"+field+"'!")}),r.resolve()},s=function(e,t,n){var r,i,s;for(i=0,s=a.length;i<s;i++)r=a[i],r.remove();return e.resolve()},{facets:{follow:{ready:o,destroy:s}}}}});
