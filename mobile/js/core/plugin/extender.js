var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define(["underscore","when"],function(e,t){return function(n){var r,i;return r=function(n,r){return t.promise(function(t){if(!n.options["with"])throw"no 'with' option specified";if(n.options.module)return r.loadModule(n.options.module).then(function(r){var i,s,o,u,a,f,l;a=e.keys(n.options["with"]),l=e.values(n.options["with"]),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t}(r),s=0;for(u=0,f=a.length;u<f;u++)o=a[u],i.prototype[o]=l[s],s++;return t(i)},function(e){return reject(e)});throw"no 'module' option specified"})},i=function(e,t,n){return r(t,n).then(function(t){return e.resolve(t)},function(e){return console.error(e.stack)})},{context:{ready:function(e,t){return e.resolve()}},factories:{extend:i}}}});
