define(["underscore","core/util/config/getLocalizedName"],function(e,t){var n;return n=function(){function n(e){var t,n,r,i,s,o,u,a,f;return s=e.data.flight,a=e.data.pricings,u=s.persons!=null?s.persons:e.data.persons,r=e.dictionary,t=this.getAirCompany(s,r),n=e.data.flight.blank.countPerPassenger,i=this.getFirstMarketingCompany(e),o=e.data.flight.international,f=e.properties.warnings,{flight:s,pricings:a,persons:u,dictionary:r,airCompany:t,countPerPassenger:n,firstMarketingCompany:i,warnings:f,international:o}}return n.prototype.getAirCompany=function(t,n){var r,i,s,o,u,a,f,l,c,h,p,d;s={},p=t.segments;for(f=0,c=p.length;f<c;f++){a=p[f],d=a.legs;for(l=0,h=d.length;l<h;l++)i=d[l],o=e.where(n[i.marketingCompany.type],{id:i.marketingCompany.id})[0],i.marketingCompany.name=this.getExistingField(o,"nameRu","nameEn"),s[i.marketingCompany.id]=i.marketingCompany}u=[];for(r in s)u.push(s[r]);return u},n.prototype.getExistingField=function(e,t,n){return e[t]?e[t]:e[n]},n.prototype.getFirstMarketingCompany=function(e){var t;return t=e.data.flight.segments[0].legs[0].marketingCompany,this.getDictionaryData(e.dictionary,t.id,t.type)},n.prototype.getDictionaryData=function(n,r,i){var s,o;return o=e.where(n[i],{id:r})[0],s=t(),o[s]},n}()});
